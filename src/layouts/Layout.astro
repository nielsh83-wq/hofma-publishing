---
import '../styles/global.css';
import 'vanilla-cookieconsent/dist/cookieconsent.css';

interface Props {
	title?: string;
	description?: string;
}

const { title = 'Hofma Publishing', description = 'Independent publishing house bringing quality books to readers worldwide.' } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Google Consent Mode v2 - must be first -->
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			window.gtag = gtag;
			gtag('consent', 'default', {
				'ad_storage': 'denied',
				'ad_user_data': 'denied',
				'ad_personalization': 'denied',
				'analytics_storage': 'denied',
				'wait_for_update': 500
			});
		</script>
		<!-- Google Tag Manager -->
		<script is:inline>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-NJSGDSS3');</script>
		<!-- End Google Tag Manager -->
		<!-- Google Analytics 4 -->
		<script is:inline async src="https://www.googletagmanager.com/gtag/js?id=G-YGL1NHVR3Q"></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-YGL1NHVR3Q');
		</script>
		<!-- End Google Analytics 4 -->
		<!-- Meta Pixel loaded on consent via cookie banner (Analytics & Ads) -->
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content={description} />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet" />
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJSGDSS3"
		height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->
		<!-- Meta Pixel noscript - only when JS disabled; no tracking without consent -->
		<header class="site-header">
			<div class="header-inner">
				<a href="/" class="logo">
					<img src="/images/logo.png" alt="Hofma Publishing logo" class="logo-img" />
				</a>
				<div class="header-right">
					<nav class="nav">
						<a href="/">Home</a>
						<a href="/blog/">Blog</a>
						<a href="/about/">About</a>
					</nav>
					<div class="social-icons">
						<a href="https://www.facebook.com/hofmapublishing/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Hofma Publishing on Facebook">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
						</a>
						<a href="https://www.instagram.com/hofmapublishing/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Hofma Publishing on Instagram" title="Instagram">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
						</a>
						<span class="social-icon disabled" aria-hidden="true">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/></svg>
						</span>
						<a href="mailto:info@hofmapublishing.com" class="social-icon header-icon" aria-label="Send email to Hofma Publishing">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" width="20" height="20"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
						</a>
					</div>
				</div>
				<button class="nav-toggle" aria-label="Toggle menu">
					<span></span>
					<span></span>
					<span></span>
				</button>
			</div>
		</header>

		<main>
			<slot />
		</main>

		<footer class="site-footer">
			<div class="footer-inner">
				<div class="footer-social">
					<div class="social-icons">
						<a href="https://www.facebook.com/hofmapublishing/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Hofma Publishing on Facebook">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
						</a>
						<a href="https://www.instagram.com/hofmapublishing/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Hofma Publishing on Instagram" title="Instagram">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
						</a>
						<span class="social-icon disabled" aria-hidden="true">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/></svg>
						</span>
						<a href="mailto:info@hofmapublishing.com" class="social-icon footer-icon" aria-label="Send email to Hofma Publishing">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" width="20" height="20"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
						</a>
					</div>
				</div>
				<p>&copy; {new Date().getFullYear()} Hofma Publishing. All rights reserved. <button type="button" class="footer-cookie-btn" data-cc="show-preferencesModal">Cookie preferences</button></p>
				<nav class="footer-nav">
					<a href="/">Home</a>
					<a href="/blog/">Blog</a>
					<a href="/about/">About</a>
				</nav>
			</div>
		</footer>

		<style is:global>
			:root {
				--color-bg: #faf9f7;
				--color-text: #1a1a1a;
				--color-text-muted: #5c5c5c;
				--color-accent: #2c5282;
				--color-accent-hover: #1a365d;
				--color-border: #e5e3df;
				--font-heading: 'Cormorant Garamond', Georgia, serif;
				--font-body: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
				--max-width: 1200px;
				--space-xs: 0.5rem;
				--space-sm: 1rem;
				--space-md: 1.5rem;
				--space-lg: 2rem;
				--space-xl: 3rem;
				--space-2xl: 4rem;
			}

			*,
			*::before,
			*::after {
				box-sizing: border-box;
			}

			html {
				scroll-behavior: smooth;
			}

			body {
				margin: 0;
				font-family: var(--font-body);
				font-size: 1.0625rem;
				line-height: 1.6;
				color: var(--color-text);
				background: var(--color-bg);
			}

			h1, h2, h3, h4 {
				font-family: var(--font-heading);
				font-weight: 600;
				line-height: 1.2;
			}

			h1 { font-size: clamp(2.25rem, 5vw, 3.5rem); }
			h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); }
			h3 { font-size: clamp(1.25rem, 2vw, 1.5rem); }

			a {
				color: var(--color-accent);
				text-decoration: none;
				transition: color 0.2s ease;
			}

			a:hover {
				color: var(--color-accent-hover);
			}

			img {
				max-width: 100%;
				height: auto;
				display: block;
			}

			/* Header */
			.site-header {
				position: sticky;
				top: 0;
				z-index: 100;
				background: rgba(250, 249, 247, 0.95);
				backdrop-filter: blur(8px);
				border-bottom: 1px solid var(--color-border);
			}

			.header-inner {
				max-width: var(--max-width);
				margin: 0 auto;
				padding: var(--space-md) var(--space-lg);
				display: flex;
				align-items: center;
				justify-content: space-between;
			}

			.logo {
				font-family: var(--font-heading);
				font-size: 1.5rem;
				font-weight: 700;
				color: var(--color-text);
			}

			.logo:hover {
				color: var(--color-accent);
			}

			.logo img {
				height: 64px;
				width: auto;
			}

			.header-right {
				display: flex;
				align-items: center;
				gap: var(--space-lg);
			}

			.social-icons {
				display: flex;
				gap: var(--space-sm);
				align-items: center;
			}

			.social-icon {
				display: inline-flex;
				align-items: center;
				justify-content: center;
				color: inherit;
				transition: opacity 0.2s ease;
			}

			.social-icon svg {
				width: 20px;
				height: 20px;
				flex-shrink: 0;
			}

			a.social-icon:hover {
				opacity: 0.7;
			}

			.social-icon.disabled {
				opacity: 0.4;
				cursor: default;
				pointer-events: none;
			}

			.header-icon,
			.footer-icon {
				display: inline-flex !important;
				align-items: center;
				justify-content: center;
				width: 22px;
				height: 22px;
				min-width: 22px;
				min-height: 22px;
				flex-shrink: 0;
				color: var(--color-text);
				text-decoration: none;
				transition: color 0.2s ease, transform 0.2s ease;
			}

			.header-icon:hover,
			.footer-icon:hover {
				color: var(--color-accent);
				transform: translateY(-2px);
			}

			.header-icon svg,
			.footer-icon svg {
				width: 20px !important;
				height: 20px !important;
				min-width: 20px;
				min-height: 20px;
				display: block;
			}

			.site-footer .footer-icon {
				color: var(--color-bg);
			}

			.site-footer .footer-icon:hover {
				color: var(--color-bg);
				opacity: 0.85;
			}

			.nav {
				display: flex;
				gap: var(--space-lg);
			}

			.nav a {
				font-weight: 500;
				color: var(--color-text);
			}

			.nav a:hover {
				color: var(--color-accent);
			}

			.nav-toggle {
				display: none;
				flex-direction: column;
				gap: 5px;
				background: none;
				border: none;
				cursor: pointer;
				padding: 5px;
			}

			.nav-toggle span {
				display: block;
				width: 24px;
				height: 2px;
				background: var(--color-text);
			}

			@media (max-width: 768px) {
				.logo img {
					height: 48px;
				}

				.header-right {
					gap: var(--space-sm);
				}

				.nav {
					display: none;
					position: absolute;
					top: 100%;
					left: 0;
					right: 0;
					flex-direction: column;
					background: var(--color-bg);
					padding: var(--space-lg);
					border-bottom: 1px solid var(--color-border);
				}

				.nav.is-open {
					display: flex;
				}

				.nav-toggle {
					display: flex;
				}
			}

			/* Main content */
			main {
				min-height: calc(100vh - 200px);
			}

			/* Footer */
			.site-footer {
				margin-top: var(--space-2xl);
				padding: var(--space-xl) var(--space-lg);
				background: var(--color-text);
				color: var(--color-bg);
			}

			.footer-inner {
				max-width: var(--max-width);
				margin: 0 auto;
				display: flex;
				flex-wrap: wrap;
				justify-content: space-between;
				align-items: center;
				gap: var(--space-md);
			}

			.footer-social {
				width: 100%;
				display: flex;
				justify-content: center;
				margin-bottom: var(--space-sm);
			}

			.footer-social .social-icons .social-icon {
				color: var(--color-bg);
			}

			.footer-nav {
				display: flex;
				gap: var(--space-lg);
			}

			.footer-nav a {
				color: var(--color-bg);
			}

			.footer-nav a:hover {
				opacity: 0.8;
			}

			.footer-cookie-btn {
				background: none;
				border: none;
				color: var(--color-bg);
				cursor: pointer;
				font-family: inherit;
				font-size: inherit;
				text-decoration: underline;
				padding: 0;
				margin-left: 0.5em;
			}

			.footer-cookie-btn:hover {
				opacity: 0.8;
			}

			/* Buttons */
			.btn {
				display: inline-block;
				padding: 0.75rem 1.5rem;
				font-family: var(--font-body);
				font-size: 0.9375rem;
				font-weight: 600;
				text-align: center;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				transition: background 0.2s ease, transform 0.1s ease;
			}

			.btn-primary {
				background: var(--color-accent);
				color: white;
			}

			.btn-primary:hover {
				background: var(--color-accent-hover);
			}

			/* Cookie consent - Hofma aesthetic (amber/stone) */
			#cc-main {
				--cc-bg: #faf9f7;
				--cc-primary-color: #1a1a1a;
				--cc-secondary-color: #5c5c5c;
				--cc-btn-primary-bg: #92400e;
				--cc-btn-primary-color: #fff;
				--cc-btn-primary-border-color: #92400e;
				--cc-btn-primary-hover-bg: #78350f;
				--cc-btn-primary-hover-color: #fff;
				--cc-btn-primary-hover-border-color: #78350f;
				--cc-btn-secondary-bg: #e5e3df;
				--cc-btn-secondary-color: #1a1a1a;
				--cc-btn-secondary-border-color: #e5e3df;
				--cc-btn-secondary-hover-bg: #d4d2ce;
				--cc-btn-secondary-hover-color: #1a1a1a;
				--cc-separator-border-color: #e5e3df;
				--cc-toggle-on-bg: #92400e;
				--cc-toggle-off-bg: #a8a29e;
				--cc-cookie-category-block-bg: #f5f5f4;
				--cc-cookie-category-block-border: #e5e3df;
				--cc-cookie-category-block-hover-bg: #e7e5e4;
				--cc-modal-border-radius: 8px;
				--cc-btn-border-radius: 6px;
				--cc-font-family: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
			}
		</style>

		<script>
			document.querySelector('.nav-toggle')?.addEventListener('click', () => {
				document.querySelector('.nav')?.classList.toggle('is-open');
			});
		</script>
		<script>
			import '../scripts/cookieconsent-config';
		</script>
	</body>
</html>
